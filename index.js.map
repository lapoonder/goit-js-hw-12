{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/error.png","../src/img/caution.png","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport default async function fetchImages(\n  searchImagesQuery,\n  currentPage,\n  imagePerPage\n) {\n  const axiosRequest = await axios.get('/api/', {\n    params: {\n      key: '47257785-d72a0dbe5696a4dd8bfb23e2a',\n      q: `${searchImagesQuery}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: `${imagePerPage}`,\n      page: `${currentPage}`,\n    },\n  });\n  return axiosRequest.data;\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEdSURBVHgBtVQLEcIwDH04mAMqAQmTgIQ6YA6Yg+FgOBgOJgEJwwE4CBn3xnK7dT/Ku8tdeSkvaV9WYAVEJNPw+AdUuJAeBWJCBR2FS40L1w6xoGKVRsNCicZTo0YMtHfOjr3hMnIpfgU7b0b4O3MJtkL/fLad8jSe65S5HFtgjeXvo5milFxFPxzWghPznZZAAbfJcCOWG+4wLEA+H3JLCjRDY82VtdgbPpHAIITET8OxNLkPRvjO8GxO3LGbEgtPZnI1/UimCpTW2IBIhXBzLQrMbMixEZOGd8eXiZkW86EF8uPvlIy8NwFxWbHPd4RbMmZLC3Bv/TVc+vfGYQZzV2T29e8UFyUiQzWv7Sl2NCTFf/DY8Wo84uOlcXsDUIAXQjLWiKQAAAAASUVORK5CYII=\"","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport errorImage from '../img/error.png';\nimport cautionImage from '../img/caution.png';\n\niziToast.settings({\n  timeout: 5000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  animateInside: false,\n  transitionIn: 'fadeIn',\n  transitionOut: 'fadeOut',\n  position: 'topRight',\n  titleColor: '#fff',\n  titleLineHeight: '24',\n  backgroundColor: '#ef4040',\n  progressBarColor: '#b51b1b',\n  messageColor: '#fff',\n  messageSize: '16',\n  messageLineHeight: '24',\n});\n\nexport const galleryShow = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\n\n// Функция вывода сообщений об ошибках\nexport function message(textMessage) {\n  iziToast.error({\n    class: 'error_message',\n    iconUrl: `${errorImage}`,\n    message: textMessage,\n  });\n}\n\nexport function messageInfo(textMessage) {\n  iziToast.info({\n    class: 'caution_message',\n    iconUrl: `${cautionImage}`,\n    message: textMessage,\n  });\n}\n\n// Создания галлереи\nexport function renderData(hits) {\n  const gallery = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n        <div class=\"image_prev\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\" />\n  </a>\n  </div>\n  <div class=\"img_info\">\n  <ul class=\"information_list\">\n  <li>Likes</li>\n  <li>${likes}</li>\n  </ul>\n    <ul class=\"information_list\">\n  <li>Views</li>\n  <li>${views}</li>\n  </ul>\n    <ul class=\"information_list\">\n  <li>Comments</li>\n  <li>${comments}</li>\n  </ul>\n    <ul class=\"information_list\">\n  <li>Downloads</li>\n  <li>${downloads}</li>\n  </ul>\n  </div>\n</li>\n`;\n      }\n    )\n    .join('');\n  return gallery;\n}\n","'use strict';\nimport fetchImages from './js/pixabay-api.js';\nimport {\n  message,\n  messageInfo,\n  renderData,\n  galleryShow,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.search-image-form'),\n  searchInputField = document.querySelector('.search-img'),\n  gallerySite = document.querySelector('.gallery'),\n  loaderImages = document.querySelector('.loader'),\n  loadMoreBtn = document.querySelector('.load-more'),\n  imagePerPage = 15; // кол-во запрашиваемых изображений с сервера для одной стриницы\n\nlet searchText = '', // Переменная хранения поискового запроса пользователя\n  currentPage = 1, // текущая страница\n  totalPages = 0; // кол-во страниц с результатами поиска\n\nform.addEventListener('submit', checkInput);\n\nfunction checkInput(e) {\n  e.preventDefault();\n  searchText = searchInputField.value.trim(); // Поисковый запрос пользователя\n  form.reset(); // Очистка поля ввода поискового запроса\n  if (!searchText.length) {\n    message('Sorry, search query cannot be empty!'); // Если поле поиска пустое\n  } else {\n    currentPage = 1; // Новый поиск должен получать результаты с первой страницы\n    gallerySite.innerHTML = ''; // Удаление текущей галлереи изображений с сайта\n    loadMoreBtn.style.display = 'none'; // Удалить кнопку 'Load more'\n    loaderImages.style.display = 'block'; // Отоброзить прогресс загрузки результатов поиска\n    fetchImages(searchText, currentPage, imagePerPage)\n      .then(data => {\n        const { totalHits, hits } = data;\n        // Если поисковый запрос удачен, передать базу изображений в функцию создания галлереи. Иначе сообщить об отсутствии подходящий запросу изображений\n        if (hits.length > 0) {\n          totalPages = Math.ceil(totalHits / imagePerPage); // Определяю общее кол-во страниц с результатами поиска\n          return renderData(hits);\n        }\n        throw 'Sorry, there are no images matching your search query. Please try again!';\n      }) // Обработка введенного запроса\n      .then(gallery => {\n        loaderImages.style.display = 'none'; // Скрыть прогресс загрузки результатов поиска\n        gallerySite.innerHTML = gallery; // Отобразить найденные изображения\n        if (totalPages > 1) {\n          loadMoreBtn.style.display = 'flex';\n        }\n        galleryShow.refresh(); // Обновление компонента просмотра увеличенных изображений simplelightbox\n      })\n      .catch(error => {\n        message(error); // Если ничего не найдено в базе изображений, отобразить сообщение об отсутствии результатов поиска по запросу\n        loaderImages.style.display = 'none'; // Скрыть прогресс загрузки результатов поиска\n      });\n  }\n}\n\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nfunction loadMoreImages(e) {\n  currentPage += 1;\n  loaderImages.style.display = 'block'; // Отоброзить прогресс загрузки результатов поиска\n  fetchImages(searchText, currentPage, imagePerPage)\n    .then(data => {\n      const { hits } = data;\n      if (hits.length > 0) {\n        return renderData(hits);\n      }\n      throw 'Sorry, there are no images matching your search query. Please try again!';\n    })\n    .then(gallery => {\n      loaderImages.style.display = 'none'; // Скрыть прогресс загрузки результатов поиска\n      gallerySite.insertAdjacentHTML('beforeend', gallery); // Добавляю изображения в конец существующих\n      galleryShow.refresh(); // Обновление компонента просмотра увеличенных изображений simplelightbox\n      const scrollDownLenght =\n        document.querySelector('.gallery-item').getBoundingClientRect().height *\n        2;\n      window.scrollBy({\n        top: scrollDownLenght,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      message(error);\n      loadMoreBtn.style.display = 'none'; // Удалить кнопку 'Load more'\n      loaderImages.style.display = 'none'; // Скрыть прогресс загрузки результатов поиска\n    });\n\n  if (currentPage === totalPages) {\n    loadMoreBtn.style.display = 'none'; // Удалить кнопку 'Load more'\n    messageInfo(`We're sorry, but you've reached the end of search results.`);\n  }\n}\n"],"names":["axios","fetchImages","searchImagesQuery","currentPage","imagePerPage","errorImage","cautionImage","iziToast","galleryShow","SimpleLightbox","message","textMessage","messageInfo","renderData","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","searchInputField","gallerySite","loaderImages","loadMoreBtn","searchText","totalPages","checkInput","e","data","totalHits","gallery","error","loadMoreImages","scrollDownLenght"],"mappings":"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"}